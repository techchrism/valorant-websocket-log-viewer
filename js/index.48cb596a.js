(function(e){function t(t){for(var s,i,o=t[0],l=t[1],c=t[2],p=0,v=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&v.push(r[i][0]),r[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);d&&d(t);while(v.length)v.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],s=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(s=!1)}s&&(n.splice(t--,1),e=i(i.s=a[0]))}return e}var s={},r={index:0},n=[];function i(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=s,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},1325:function(e,t,a){},"4ed1":function(e,t,a){"use strict";a("1325")},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[e.ready?a("v-navigation-drawer",{ref:"nav",attrs:{clipped:e.$vuetify.breakpoint.lgAndUp,width:500,app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("div",{staticClass:"d-flex flex-column full-height"},[a("v-text-field",{staticClass:"mx-3 mt-7",attrs:{dense:"",label:"Search","append-icon":"mdi-magnify",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("events-list",{ref:"eventsList",attrs:{height:e.eventsHeight,search:e.search},on:{selectionChange:e.selectionChange}})],1)]):e._e(),a("v-app-bar",{attrs:{app:"",color:"primary",dark:"","clipped-left":e.$vuetify.breakpoint.lgAndUp}},[e.ready?a("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}):e._e(),a("v-toolbar-title",{staticClass:"headline"},[a("span",{staticClass:"font-weight-light"},[e._v("Valorant Websocket Log Viewer")]),a("v-btn",{attrs:{icon:"",href:"https://github.com/techchrism/valorant-websocket-log-viewer"}},[a("v-icon",[e._v("mdi-github")])],1)],1),a("v-spacer"),a("dark-button")],1),a("v-main",[e.ready?e._e():[a("p",{staticClass:"text-center mt-8"},[e._v(" A webapp designed to ease looking through Valorant WebSocket events."),a("br"),e._v(" Log files can be generated from "),a("a",{attrs:{href:"https://github.com/techchrism/valorant-websocket-logger"}},[e._v("https://github.com/techchrism/valorant-websocket-logger")])]),a("file-dropper")],e.ready&&null!=e.selection?[a("event-info",{attrs:{event:e.selection}})]:e._e()],2)],1)},n=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:""},on:{click:e.toggleMode}},"v-btn",r,!1),s),[a("v-icon",[e._v(e._s(e.oppositeIcon))])],1)]}}])},[a("span",[e._v("Use "+e._s(e.oppositeModeName)+" Mode")])])},o=[],l=a("a002"),c=a.n(l),d={name:"DarkButton",computed:{oppositeIcon(){return"mdi-"+(this.$vuetify.theme.dark?"white-balance-sunny":"weather-night")},oppositeModeName(){return this.$vuetify.theme.dark?"Light":"Dark"}},methods:{toggleMode(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark}},watch:{"$vuetify.theme.dark":function(e){c.a.setItem("theme",e?"dark":"light")}},mounted(){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{this.$vuetify.theme.dark=e.matches})}},p=d,v=a("2877"),u=a("6544"),h=a.n(u),m=a("8336"),f=a("132d"),g=a("3a2f"),_=Object(v["a"])(p,i,o,!1,null,"556f9379",null),y=_.exports;h()(_,{VBtn:m["a"],VIcon:f["a"],VTooltip:g["a"]});var b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("form",{attrs:{enctype:"multipart/form-data",novalidate:""}},[a("div",{class:e.boxClass,on:{dragenter:e.dragenter,dragleave:e.dragleave}},[a("input",{ref:"fileInput",staticClass:"file-input",attrs:{type:"file",accept:".txt"},on:{change:e.filesChanged}}),a("div",{staticClass:"text-center padding no-click upload-msg"},[e.loading?e._e():[a("h3",[e._v("Drag or Click to Upload WebSocket Log")])],e.loading?[a("v-progress-circular",{attrs:{indeterminate:""}}),a("br"),a("h3",[e._v("Loading...")])]:e._e()],2)])]),e.error?a("v-alert",{staticClass:"file-error",attrs:{type:"error"}},[e._v(" "+e._s(e.error)+" ")]):e._e()],1)},x=[],w={name:"FileDropper",computed:{boxClass(){return{"upload-box":!0,"upload-hovering":this.isHovering}}},methods:{dragenter(){this.isHovering=!0},dragleave(){this.isHovering=!1},async filesChanged(e){this.isHovering=!1,this.loading=!0,this.error="";const t=e.target.files[0];try{await this.$store.dispatch("parseTxt",{file:t})}catch(a){this.error=a.toString()}this.loading=!1}},data(){return{isHovering:!1,loading:!1,error:""}}},D=w,k=(a("4ed1"),a("0798")),C=a("490a"),S=Object(v["a"])(D,b,x,!1,null,"ca27d944",null),O=S.exports;h()(S,{VAlert:k["a"],VProgressCircular:C["a"]});var V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex flex-grow-1"},[a("v-list",{staticClass:"no-padding full-width"},[a("v-virtual-scroll",{attrs:{items:e.filteredEvents,"item-height":62,height:e.height},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.item,r=t.index;return[a("v-list-item-group",{on:{change:e.selectionChange},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[a("event-list-element",{attrs:{index:r,event:s}})],1)]}}])})],1)],1)},M=[],$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-list-item",{key:e.index,staticClass:"event-item",attrs:{value:e.index}},[a("v-list-item-content",[a("v-list-item-title",[e._v(" "+e._s(e.event.name.replace("OnJsonApiEvent_",""))+" ")]),e.presenceData?a("v-list-item-subtitle",[e._v(" "+e._s(e.presenceData.playerName)+" "),e.presenceData.party.players.length>1?a("span",[e._v(" + "+e._s(e.presenceData.party.players.length-1))]):e._e(),e.presenceData.status?a("span",[e._v(" "+e._s(e.presenceData.status))]):e._e(),e.presenceData.map?a("span",[e._v(", "+e._s(e.presenceData.map))]):e._e(),e.presenceData.mode?a("span",[e._v(", "+e._s(e.presenceData.mode))]):e._e(),e.presenceData.map?a("span",[e._v(", "+e._s(e.presenceData.allyScore)+" - "+e._s(e.presenceData.enemyScore))]):e._e()]):e._e(),e.chatData?a("v-list-item-subtitle",[e._v(" "+e._s(e.chatData.name)+": "+e._s(e.chatData.body)+" ")]):e._e()],1),a("v-list-item-action",[a("span",{staticClass:"text--secondary"},[e._v(e._s(e.hoursmins))])])],1)},L=[],E={name:"EventListElement",props:{index:Number,event:Object},computed:{hoursmins(){const e=new Date(this.event.time);return(e.getHours()<10?"0":"")+e.getHours()+":"+(e.getMinutes()<10?"0":"")+e.getMinutes()},chatData(){if(this.event.data.data&&Array.isArray(this.event.data.data.messages)&&1===this.event.data.data.messages.length){const e=this.event.data.data.messages[0];return{body:e.body,name:e["game_name"]}}return null},presenceData(){if(this.event.data.data&&Array.isArray(this.event.data.data.presences)&&1===this.event.data.data.presences.length&&this.event.data.data.presences[0].private){const e=this.event.data.data.presences[0],t=e.private.partyId,a=e["game_name"],s=this.$store.state.parties.find(e=>e.id===t),r={INGAME:"in game",MENUS:"in menus",PREGAME:"pre-game"}[e.private["sessionLoopState"]],n={"/Game/Maps/Ascent/Ascent":"Ascent","/Game/Maps/Bonsai/Bonsai":"Split","/Game/Maps/Duality/Duality":"Bind","/Game/Maps/Foxtrot/Foxtrot":"Breeze","/Game/Maps/Port/Port":"Icebox","/Game/Maps/Poveglia/Range":"The Range","/Game/Maps/Triad/Triad":"Haven"}[e.private["matchMap"]];return{playerName:a,party:s,status:r,map:n,mode:e.private["queueId"],allyScore:e.private["partyOwnerMatchScoreAllyTeam"],enemyScore:e.private["partyOwnerMatchScoreEnemyTeam"]}}return null}}},I=E,A=(a("58db"),a("da13")),T=a("1800"),N=a("5d23"),H=Object(v["a"])(I,$,L,!1,null,"4a84e79d",null),j=H.exports;h()(H,{VListItem:A["a"],VListItemAction:T["a"],VListItemContent:N["a"],VListItemSubtitle:N["b"],VListItemTitle:N["c"]});var P={name:"EventsList",components:{EventListElement:j},props:{height:Number,search:String},data:()=>({model:null}),computed:{filteredEvents(){return this.search?this.$store.state.events.filter(e=>e.text.includes(this.search)):this.$store.state.events}},methods:{selectionChange(e){this.$emit("selectionChange",{index:e,selection:this.filteredEvents[e]})}}},B=P,G=(a("a0f0"),a("8860")),J=a("1baa"),R=a("0de5"),F=Object(v["a"])(B,V,M,!1,null,"f8c76b66",null),z=F.exports;h()(F,{VList:G["a"],VListItemGroup:J["a"],VVirtualScroll:R["a"]});var U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ma-5"},[a("h1",[e._v(e._s(e.event.name))]),e.eventHelp?a("h3",[e._v(e._s(e.eventHelp))]):e._e(),a("v-divider",{staticClass:"ma-5"}),a("v-card",{staticClass:"mt-5"},[a("v-card-title",[e._v("Info")]),a("v-card-text",[a("strong",[e._v("Received time:")]),e._v(" "+e._s(e.event.time)+" ("+e._s(e.timeFormatted)+")"),a("br"),e.eventTimestamp?[a("strong",[e._v("Time delta:")]),e._v(" "+e._s(e.event.time-e.eventTimestamp)+"ms"),a("br")]:e._e()],2)],1),e.party?a("v-card",{staticClass:"mt-5"},[a("v-card-title",[e._v("Party")]),a("v-card-text",{staticClass:"text--primary"},[a("strong",[e._v("ID:")]),e._v(" "+e._s(e.party.id)),a("br"),a("strong",[e._v("Members:")]),a("br"),a("ul",e._l(e.party.players,(function(t){return a("li",{key:t},[e._v(e._s(t))])})),0)])],1):e._e(),a("v-card",{staticClass:"mt-5"},[a("v-card-title",[e._v("JSON Data")]),a("v-card-text",{staticClass:"text--primary"},[a("pre",[e._v(e._s(e.dataFormatted))])])],1)],1)},W=[],q={name:"EventInfo",props:{event:Object},computed:{dataFormatted(){return JSON.stringify(this.event.data,null,4)},eventHelp(){return this.$store.state.helpData[this.event.name]},timeFormatted(){return new Date(this.event.time).toString()},presence(){return this.event.data.data&&Array.isArray(this.event.data.data.presences)&&1===this.event.data.data.presences.length?this.event.data.data.presences[0]:null},eventTimestamp(){return this.presence?this.presence.time:this.event.data.data&&this.event.data.data.timestamp?this.event.data.data.timestamp:null},party(){return this.presence&&this.presence.private?this.$store.state.parties.find(e=>e.id===this.presence.private.partyId):null}}},K=q,Q=a("b0af"),X=a("99d9"),Y=a("ce7e"),Z=Object(v["a"])(K,U,W,!1,null,"0fc0cb38",null),ee=Z.exports;h()(Z,{VCard:Q["a"],VCardText:X["a"],VCardTitle:X["b"],VDivider:Y["a"]});var te={name:"App",components:{EventInfo:ee,EventsList:z,FileDropper:O,DarkButton:y},computed:{ready(){return null!==this.$store.state.lockData}},data:()=>({drawer:null,eventsHeight:0,selection:null,eventsListResizeObserver:null,search:""}),updated(){this.$refs.eventsList.$el&&null===this.eventsListResizeObserver&&(this.eventsHeight=this.$refs.eventsList.$el.clientHeight,this.eventsListResizeObserver=new ResizeObserver(e=>{this.eventsHeight=e[0].contentRect.height}),this.eventsListResizeObserver.observe(this.$refs.eventsList.$el))},methods:{selectionChange({index:e,selection:t}){this.selection=t}}},ae=te,se=(a("034f"),a("7496")),re=a("40dc"),ne=a("5bc1"),ie=a("f6c4"),oe=a("f774"),le=a("2fa4"),ce=a("8654"),de=a("2a7f"),pe=Object(v["a"])(ae,r,n,!1,null,null,null),ve=pe.exports;h()(pe,{VApp:se["a"],VAppBar:re["a"],VAppBarNavIcon:ne["a"],VBtn:m["a"],VIcon:f["a"],VMain:ie["a"],VNavigationDrawer:oe["a"],VSpacer:le["a"],VTextField:ce["a"],VToolbarTitle:de["a"]});var ue=a("2f62");s["a"].use(ue["a"]);var he=new ue["a"].Store({state:{lockData:null,sessionData:null,helpData:null,parties:null,events:[]},mutations:{setLockData(e,t){e.lockData=t},setSessionData(e,t){e.sessionData=t},setHelpData(e,t){e.helpData=t},setEvents(e,t){e.events=t},setParties(e,t){e.parties=t},clearData(e){e.lockData=null,e.sessionData=null,e.events=[]}},actions:{async parseTxt(e,{file:t}){let a;try{a=await t.text()}catch(d){throw"Could not read text file"}const s=a.split("\n").filter(e=>e.length>0);if(s.length<3)throw"Not enough lines in file";const r=/(\d+) (.*)/,[n,i,o]=s.splice(0,3).map(e=>JSON.parse(e));let l=[];const c=s.filter(e=>e.length>0).map(e=>{const[,t,a]=r.exec(e);if(0===a.length)return null;let s={};return[,s.name,s.data]=JSON.parse(a),s.original=s.data,s.time=Number(t),s.data.data&&Array.isArray(s.data.data.presences)&&(s.data.data.presences=s.data.data.presences.map(e=>{if(e.private){e.private=JSON.parse(atob(e.private));const t=l.find(t=>t.id===e.private.partyId),a=e["game_name"]+"#"+e["game_tag"];t?t.players.includes(a)||t.players.push(a):l.push({id:e.private.partyId,players:[a]})}return e})),s.data.data&&"string"===typeof s.data.data.payload&&s.data.data.payload.startsWith("{")&&(s.data.data.payload=JSON.parse(s.data.data.payload)),s.text=JSON.stringify(s.data),s}).filter(e=>null!==e);e.commit("setLockData",n),e.commit("setSessionData",i),e.commit("setHelpData",o),e.commit("setParties",l),e.commit("setEvents",c)}},modules:{}}),me=a("f309");s["a"].config.productionTip=!1,s["a"].use(me["a"]),c.a.getItem("theme").then(e=>{e||(e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),new s["a"]({vuetify:new me["a"]({theme:{dark:"light"!==e}}),store:he,render:function(e){return e(ve)}}).$mount("#app")})},"58db":function(e,t,a){"use strict";a("5e90")},"5e90":function(e,t,a){},"6e9f":function(e,t,a){},"85ec":function(e,t,a){},a0f0:function(e,t,a){"use strict";a("6e9f")}});
//# sourceMappingURL=index.48cb596a.js.map