(function(){"use strict";var e={2555:function(e,t,a){var s=a(144),n=a(3726),r=a(4882),i=a(5078),o=a(4741),l=a(9088),c=a(3102),p=a(1837),d=a(5536),h=a(2070),u=a(3845),v=function(){var e=this,t=e._self._c;return t(n.Z,[e.ready?t(p.Z,{ref:"nav",attrs:{clipped:e.$vuetify.breakpoint.lgAndUp,width:500,app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[t("div",{staticClass:"d-flex flex-column full-height"},[t(h.Z,{staticClass:"mx-3 mt-7",attrs:{dense:"",label:"Search","append-icon":"mdi-magnify",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t("events-list",{ref:"eventsList",attrs:{height:e.eventsHeight,search:e.search},on:{selectionChange:e.selectionChange}})],1)]):e._e(),t(r.Z,{attrs:{app:"",color:"primary",dark:"","clipped-left":e.$vuetify.breakpoint.lgAndUp}},[e.ready?t(i.Z,{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}):e._e(),t(u.qW,{staticClass:"headline"},[t("span",{staticClass:"font-weight-light"},[e._v("Valorant Websocket Log Viewer")]),t(o.Z,{attrs:{icon:"",href:"https://github.com/techchrism/valorant-websocket-log-viewer"}},[t(l.Z,[e._v("mdi-github")])],1)],1),t(d.Z),t("dark-button")],1),t(c.Z,[e.ready?e._e():[t("p",{staticClass:"text-center mt-8"},[e._v(" A webapp designed to ease looking through Valorant WebSocket events."),t("br"),e._v(" Log files can be generated from "),t("a",{attrs:{href:"https://github.com/techchrism/valorant-websocket-logger"}},[e._v("https://github.com/techchrism/valorant-websocket-logger")])]),t("file-dropper")],e.ready&&null!=e.selection?[t("event-info",{attrs:{event:e.selection}})]:e._e()],2)],1)},m=[],f=a(173),g=function(){var e=this,t=e._self._c;return t(f.Z,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(o.Z,e._g(e._b({attrs:{icon:""},on:{click:e.toggleMode}},"v-btn",s,!1),a),[t(l.Z,[e._v(e._s(e.oppositeIcon))])],1)]}}])},[t("span",[e._v("Use "+e._s(e.oppositeModeName)+" Mode")])])},_=[],y=a(9483),b=a.n(y),k={name:"DarkButton",computed:{oppositeIcon(){return"mdi-"+(this.$vuetify.theme.dark?"white-balance-sunny":"weather-night")},oppositeModeName(){return this.$vuetify.theme.dark?"Light":"Dark"}},methods:{toggleMode(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark}},watch:{"$vuetify.theme.dark":function(e){b().setItem("theme",e?"dark":"light")}},mounted(){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{this.$vuetify.theme.dark=e.matches}))}},D=k,w=a(1001),x=(0,w.Z)(D,g,_,!1,null,"556f9379",null),Z=x.exports,S=a(9759),C=a(7935),O=function(){var e=this,t=e._self._c;return t("div",[t("form",{attrs:{enctype:"multipart/form-data",novalidate:""}},[t("div",{class:e.boxClass,on:{dragenter:e.dragenter,dragleave:e.dragleave}},[t("input",{ref:"fileInput",staticClass:"file-input",attrs:{type:"file",accept:".txt"},on:{change:e.filesChanged}}),t("div",{staticClass:"text-center padding no-click upload-msg"},[e.loading?e._e():[t("h3",[e._v("Drag or Click to Upload WebSocket Log")])],e.loading?[t(C.Z,{attrs:{indeterminate:""}}),t("br"),t("h3",[e._v("Loading...")])]:e._e()],2)])]),e.error?t(S.Z,{staticClass:"file-error",attrs:{type:"error"}},[e._v(" "+e._s(e.error)+" ")]):e._e()],1)},M=[],E={name:"FileDropper",computed:{boxClass(){return{"upload-box":!0,"upload-hovering":this.isHovering}}},methods:{dragenter(){this.isHovering=!0},dragleave(){this.isHovering=!1},async filesChanged(e){this.isHovering=!1,this.loading=!0,this.error="";const t=e.target.files[0];try{await this.$store.dispatch("parseTxt",{file:t})}catch(a){this.error=a.toString(),console.error(a)}this.loading=!1}},data(){return{isHovering:!1,loading:!1,error:""}}},$=E,L=(0,w.Z)($,O,M,!1,null,"152ada34",null),A=L.exports,H=a(7970),P=a(8001),N=a(3210),I=function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex flex-grow-1"},[t(H.Z,{staticClass:"no-padding full-width"},[t(N.Z,{attrs:{items:e.filteredEvents,"item-height":62,height:e.height},scopedSlots:e._u([{key:"default",fn:function({item:a,index:s}){return[t(P.Z,{on:{change:e.selectionChange},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[t("event-list-element",{attrs:{index:s,event:a}})],1)]}}])})],1)],1)},T=[],B=a(1667),j=a(3444),R=a(9457),F=function(){var e=this,t=e._self._c;return t(B.Z,{key:e.index,staticClass:"event-item",attrs:{value:e.index}},[t(R.km,[t(R.V9,[e._v(" "+e._s(e.event.name.replace("OnJsonApiEvent_",""))+" ")]),e.presenceData?t(R.oZ,[e._v(" "+e._s(e.presenceData.playerName)+" "),e.presenceData.party.players.length>1?t("span",[e._v(" + "+e._s(e.presenceData.party.players.length-1))]):e._e(),e.presenceData.status?t("span",[e._v(" "+e._s(e.presenceData.status))]):e._e(),e.presenceData.map?t("span",[e._v(", "+e._s(e.presenceData.map))]):e._e(),e.presenceData.mode?t("span",[e._v(", "+e._s(e.presenceData.mode))]):e._e(),e.presenceData.map?t("span",[e._v(", "+e._s(e.presenceData.allyScore)+" - "+e._s(e.presenceData.enemyScore))]):e._e()]):e._e(),e.chatData?t(R.oZ,[e._v(" "+e._s(e.chatData.name)+": "+e._s(e.chatData.body)+" ")]):e._e()],1),t(j.Z,[t("span",{staticClass:"text--secondary"},[e._v(e._s(e.hoursmins))])])],1)},G=[],J={name:"EventListElement",props:{index:Number,event:Object},computed:{hoursmins(){const e=this.event.time||this.presence?.time||this.event.data.data.timestamp;if(!e)return"?";const t=new Date(e);return(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()},chatData(){if(this.event.data.data&&Array.isArray(this.event.data.data.messages)&&1===this.event.data.data.messages.length){const e=this.event.data.data.messages[0];return{body:e.body,name:e["game_name"]}}return null},presence(){return this.event.data.data&&Array.isArray(this.event.data.data.presences)&&1===this.event.data.data.presences.length&&this.event.data.data.presences[0].private?this.event.data.data.presences[0]:null},presenceData(){if(this.presence){const e=this.presence.private.partyId,t=this.presence["game_name"],a=this.$store.state.parties.find((t=>t.id===e)),s={INGAME:"in game",MENUS:"in menus",PREGAME:"pre-game"}[this.presence.private["sessionLoopState"]],n={"/Game/Maps/Ascent/Ascent":"Ascent","/Game/Maps/Bonsai/Bonsai":"Split","/Game/Maps/Duality/Duality":"Bind","/Game/Maps/Foxtrot/Foxtrot":"Breeze","/Game/Maps/Port/Port":"Icebox","/Game/Maps/Poveglia/Range":"The Range","/Game/Maps/Triad/Triad":"Haven"}[this.presence.private["matchMap"]];return{playerName:t,party:a,status:s,map:n,mode:this.presence.private["queueId"],allyScore:this.presence.private["partyOwnerMatchScoreAllyTeam"],enemyScore:this.presence.private["partyOwnerMatchScoreEnemyTeam"]}}return null}}},W=J,z=(0,w.Z)(W,F,G,!1,null,"105a9702",null),U=z.exports,V={name:"EventsList",components:{EventListElement:U},props:{height:Number,search:String},data:()=>({model:null}),computed:{filteredEvents(){return this.search?this.$store.state.events.filter((e=>e.name.includes(this.search)||e.text.includes(this.search))):this.$store.state.events}},methods:{selectionChange(e){this.$emit("selectionChange",{index:e,selection:this.filteredEvents[e]})}}},q=V,K=(0,w.Z)(q,I,T,!1,null,"7e8df1a8",null),Q=K.exports,X=a(3816),Y=a(5255),ee=a(7690),te=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ma-5"},[t("h1",[e._v(e._s(e.event.name))]),e.eventHelp?t("h3",[e._v(e._s(e.eventHelp))]):e._e(),t(ee.Z,{staticClass:"ma-5"}),e.event.time?t(X.Z,{staticClass:"mt-5"},[t(Y.EB,[e._v("Info")]),t(Y.ZB,[t("strong",[e._v("Received time:")]),e._v(" "+e._s(e.event.time)+" ("+e._s(e.timeFormatted)+")"),t("br"),e.eventTimestamp?[t("strong",[e._v("Time delta:")]),e._v(" "+e._s(e.event.time-e.eventTimestamp)+"ms"),t("br")]:e._e()],2)],1):e._e(),e.party?t(X.Z,{staticClass:"mt-5"},[t(Y.EB,[e._v("Party")]),t(Y.ZB,{staticClass:"text--primary"},[t("strong",[e._v("ID:")]),e._v(" "+e._s(e.party.id)),t("br"),t("strong",[e._v("Members:")]),t("br"),t("ul",e._l(e.party.players,(function(a){return t("li",{key:a},[e._v(e._s(a))])})),0)])],1):e._e(),t(X.Z,{staticClass:"mt-5"},[t(Y.EB,[e._v("JSON Data")]),t(Y.ZB,{staticClass:"text--primary"},[t("pre",[e._v(e._s(e.dataFormatted))])])],1)],1)},ae=[],se={name:"EventInfo",props:{event:Object},computed:{dataFormatted(){return JSON.stringify(this.event.data,null,4)},eventHelp(){return this.$store.state.helpData[this.event.name]},timeFormatted(){return new Date(this.event.time).toString()},presence(){return this.event.data.data&&Array.isArray(this.event.data.data.presences)&&1===this.event.data.data.presences.length?this.event.data.data.presences[0]:null},eventTimestamp(){return this.presence?this.presence.time:this.event.data.data&&this.event.data.data.timestamp?this.event.data.data.timestamp:null},party(){return this.presence&&this.presence.private?this.$store.state.parties.find((e=>e.id===this.presence.private.partyId)):null}}},ne=se,re=(0,w.Z)(ne,te,ae,!1,null,"5d0bf700",null),ie=re.exports,oe={name:"App",components:{EventInfo:ie,EventsList:Q,FileDropper:A,DarkButton:Z},computed:{ready(){return null!==this.$store.state.lockData}},data:()=>({drawer:null,eventsHeight:0,selection:null,eventsListResizeObserver:null,search:""}),updated(){this.$refs.eventsList.$el&&null===this.eventsListResizeObserver&&(this.eventsHeight=this.$refs.eventsList.$el.clientHeight,this.eventsListResizeObserver=new ResizeObserver((e=>{this.eventsHeight=e[0].contentRect.height})),this.eventsListResizeObserver.observe(this.$refs.eventsList.$el))},methods:{selectionChange({index:e,selection:t}){this.selection=t}}},le=oe,ce=(0,w.Z)(le,v,m,!1,null,null,null),pe=ce.exports,de=a(629);function he(e,t){let a={name:e,data:t};return a.original=a.data,a.data.data&&Array.isArray(a.data.data.presences)&&(a.data.data.presences=a.data.data.presences.map((e=>(e.private&&(e.private=JSON.parse(e.private.startsWith("{")?e.private:atob(e.private))),e)))),a.data.data&&"string"===typeof a.data.data.payload&&a.data.data.payload.startsWith("{")&&(a.data.data.payload=JSON.parse(a.data.data.payload)),a.text=JSON.stringify(a.data),a}function ue(e){const t=[];for(const a of e)if(Array.isArray(a.data?.data?.presences))for(const e of a.data.data.presences){if(!e.private)continue;const a=t.find((t=>t.id===e.private.partyId)),s=e["game_name"]+"#"+e["game_tag"];a?a.players.includes(s)||a.players.push(s):t.push({id:e.private.partyId,players:[s]})}return t}s.ZP.use(de.ZP);var ve=new de.ZP.Store({state:{lockData:null,sessionData:null,helpData:null,parties:null,events:[]},mutations:{setLockData(e,t){e.lockData=t},setSessionData(e,t){e.sessionData=t},setHelpData(e,t){e.helpData=t},setEvents(e,t){e.events=t},setParties(e,t){e.parties=t},clearData(e){e.lockData=null,e.sessionData=null,e.events=[]}},actions:{async parseTxt(e,{file:t}){let a;try{a=await t.text()}catch(s){throw"Could not read text file"}if(a.startsWith("[")){const t=JSON.parse(a),s=t.map((e=>he(e.event,e.data)));e.commit("setLockData",{}),e.commit("setSessionData",{}),e.commit("setHelpData",{}),e.commit("setParties",ue(s)),e.commit("setEvents",s)}else{const t=a.split("\n").filter((e=>e.length>0));if(t.length<3)throw"Not enough lines in file";const s=/(\d+) (.*)/,[n,r,i]=t.splice(0,3).map((e=>JSON.parse(e))),o=t.filter((e=>e.length>0)).map((e=>{const[,t,a]=s.exec(e);if(0===a.length)return null;const[,n,r]=JSON.parse(a),i=he(n,r);return i.time=Number(t),i})).filter((e=>null!==e));e.commit("setLockData",n),e.commit("setSessionData",r),e.commit("setHelpData",i),e.commit("setParties",ue(o)),e.commit("setEvents",o)}}},modules:{}}),me=a(154);s.ZP.config.productionTip=!1,s.ZP.use(me.Z),b().getItem("theme").then((e=>{e||(e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),new s.ZP({vuetify:new me.Z({theme:{dark:"light"!==e}}),store:ve,render:function(e){return e(pe)}}).$mount("#app")}))}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,s,n,r){if(!s){var i=1/0;for(p=0;p<e.length;p++){s=e[p][0],n=e[p][1],r=e[p][2];for(var o=!0,l=0;l<s.length;l++)(!1&r||i>=r)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(o=!1,r<i&&(i=r));if(o){e.splice(p--,1);var c=n();void 0!==c&&(t=c)}}return t}r=r||0;for(var p=e.length;p>0&&e[p-1][2]>r;p--)e[p]=e[p-1];e[p]=[s,n,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={826:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,r,i=s[0],o=s[1],l=s[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(l)var p=l(a)}for(t&&t(s);c<i.length;c++)r=i[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(p)},s=self["webpackChunkvalorant_websocket_log_viewer"]=self["webpackChunkvalorant_websocket_log_viewer"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(2555)}));s=a.O(s)})();
//# sourceMappingURL=index.67b167e1.js.map